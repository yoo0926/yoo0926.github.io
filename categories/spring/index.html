<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="naver-site-verification" content="ab9573df103dfc4dfc214b8015c103cf14d9fcce"><meta name="robots" content="noindex"><meta><title>카테고리: spring - 하루하루 끄적끄적</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="하루하루 끄적끄적"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="하루하루 끄적끄적"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="티끌모아 태산이라 티끌부터 모아본다."><meta property="og:type" content="blog"><meta property="og:title" content="하루하루 끄적끄적"><meta property="og:url" content="https://yoo0926.github.io/"><meta property="og:site_name" content="하루하루 끄적끄적"><meta property="og:description" content="티끌모아 태산이라 티끌부터 모아본다."><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://yoo0926.github.io/img/og_image.png"><meta property="article:author" content="Jaeyong Yoo"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yoo0926.github.io"},"headline":"하루하루 끄적끄적","image":["https://yoo0926.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Jaeyong Yoo"},"publisher":{"@type":"Organization","name":"하루하루 끄적끄적","logo":{"@type":"ImageObject","url":"https://yoo0926.github.io/img/logo-header.png"}},"description":"티끌모아 태산이라 티끌부터 모아본다."}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/dracula.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-EKSGRQ3VMZ" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-EKSGRQ3VMZ');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-4055492668550708" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/rss2.xml" title="하루하루 끄적끄적" type="application/rss+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo-header.png" alt="하루하루 끄적끄적" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/yoo0926/yoo0926.github.io"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">카테고리</a></li><li class="is-active"><a href="#" aria-current="page">spring</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-04-17T09:34:51.000Z" title="2023. 4. 17. 오후 6:34:51">2023-04-17</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2023-06-06T14:32:13.596Z" title="2023. 6. 6. 오후 11:32:13">2023-06-06</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/spring/">spring</a></span><span class="level-item">7분안에 읽기 (약 986 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/17/spring/log4j-1/">log4j2 설정</a></h1><div class="content"><p>사내 프로젝트의 여러가지 설정, 프로퍼티들은 dev, test, master로 분리되어있는데 살펴보다보니 log4j2-test.xml이 없고 test 프로파일로 빌드 시 log4j2-dev.xml을 바라보고 있었다.</p>
<p>시간도 좀 여유가 있던 시점이라 그냥 내가 만들어서 분리시켰는데 하는김에 SQL 관련 로그 설정을 변경했고 공부도 할겸 내용을 정리했다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SQL Logger --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.connection&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;OFF&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.audit&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;OFF&quot;</span>/&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span> </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.resultset&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;OFF&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.sqlonly&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;OFF&quot;</span>/&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.resultsettable&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span>/&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.sqltiming&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>키</th>
<th>내용</th>
</tr>
</thead>
<tbody>
<tr>
<td>jdbc.connection</td>
<td>열려있는 모든 번호와 연결 수립 및 해제 이벤트를 기록. 이는 연결 문제를 찾아내는데 매우 유용 (Connection Pool 설정)</td>
</tr>
<tr>
<td>jdbc.audit</td>
<td>ResultSet을 제외한 모든 JDBC 호출 정보를 로그로 남긴다. 많은 양의 로그가 생성되므로 특별히 JDBC 문제를 추적해야 할 필요가 있는 경우를 제외하고는 사용을 권장하지 않는다.</td>
</tr>
<tr>
<td>jdbc.resultset</td>
<td>ResultSet을 포함한 모든 JDBC 호출 정보를 로그로 남기므로 매우 방대한 양의 로그가 생성된다.</td>
</tr>
<tr>
<td>jdbc.sqlonly</td>
<td>SQL문만을 로그로 남기며, PreparedStatement일 경우 관련된 argument 값으로 대체된 SQL문이 보여진다. (원래는 ? 로 표시되는데, log4j 덕분에 완전한 쿼리로 보여지는 것임)</td>
</tr>
<tr>
<td>jdbc.resultsettable</td>
<td>SQL 결과 조회된 데이터의 table을 로그로 남긴다.</td>
</tr>
<tr>
<td>jdbc.sqltiming</td>
<td>SQL문과 해당 SQL을 실행시키는데 수행된 시간 정보(milliseconds)를 포함한다.</td>
</tr>
</tbody>
</table>
<p><strong>SQL관련</strong></p>
<p>sqlonly와 sqltiming은 sql로그를 찍는 공통적인 기능을 하며 sqltiming이 sqlonly를 포함하고 있습니다.</p>
<p>#{id} 등 파라미터로 넣어준 값도 모두 치환하여 출력해줍니다.</p>
<p>둘다 찍도록 하면 sql문이 두번 찍히니 하나만 찍어줍니다.</p>
<ul>
<li>jdbc.sqlonly : SQL문을 로그로 남깁니다.</li>
<li>jdbc.sqltiming : SQL문과 수행된 시간을 로그로 남깁니다.</li>
</ul>
<p><strong>TABLE관련</strong></p>
<p>결과를 table형식으로 만들어 출력해줍니다.</p>
<ul>
<li>jdbc.resultsettable : SQL 결과 조회된 데이터를 table 형식으로 만들어줍니다.</li>
</ul>
<p><strong>JDBC호출 관련</strong></p>
<p>아래 두개의 설정은 일반적으로는 킬 필요가 없는 설정입니다.</p>
<p>두개가 묶음으로 JDBC 호출정보를 출력해주는 기능을 하며 ResultSet을 포함하느냐 포함하지 않느냐의 차이입니다.</p>
<ul>
<li>jdbc.audit : ResultSet을 제외한 JDBC 호출 정보를 로그로 남긴다.</li>
<li>jdbc.resultset : ResultSet을 포함한JDBC 호출 정보를 로그로 남깁니다.</li>
</ul>
<p>additivity : 중복된 로그를 남길 지 여부를 설정한다.</p>
<p>기본적으로 logger는 정의한 패키지의 조상으로부터 모든 appender를 상속받아서 만약 어떤 Logger가 같은 appender를 사용한다면 메시지가 2번 찍히게 된다.</p>
<p>additivity=”false” 설정하면 이를 방지할 수 있다.</p>
<h3 id="Log-Level">Log Level</h3>
<p>로그 레벨은 다음과 같다. (OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL)</p>
<table>
<thead>
<tr>
<th>레벨</th>
<th>범위</th>
</tr>
</thead>
<tbody>
<tr>
<td>OFF</td>
<td>이벤트를 기록하지 않음</td>
</tr>
<tr>
<td>FATAL</td>
<td>아주 심각한 에러가 발생한 상태를 나타냄. 시스템적으로 심각한 문제가 발생해서 어플리케이션 작동이 불가능할 경우가 해당하는데, 일반적으로는 어플리케이션에서는 사용할 일이 없음.</td>
</tr>
<tr>
<td>ERROR</td>
<td>요청을 처리하는중 문제가 발생한 상태를 나타냄.</td>
</tr>
<tr>
<td>WARN</td>
<td>처리 가능한 문제이지만, 향후 시스템 에러의 원인이 될 수 있는 경고성 메시지를 나타냄.</td>
</tr>
<tr>
<td>INFO</td>
<td>로그인, 상태변경과 같은 정보성 메시지를 나타냄.</td>
</tr>
<tr>
<td>DEBUG</td>
<td>개발시 디버그 용도로 사용한 메시지를 나타냄.</td>
</tr>
<tr>
<td>TRACE</td>
<td>디버그 레벨이 너무 광범위한 것을 해결하기 위해서 좀더 상세한 상태를 나타냄.</td>
</tr>
<tr>
<td>ALL</td>
<td>모든 이벤트를 기록함</td>
</tr>
</tbody>
</table>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-04-04T00:46:08.000Z" title="2023. 4. 4. 오전 9:46:08">2023-04-04</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2023-06-10T04:20:38.882Z" title="2023. 6. 10. 오후 1:20:38">2023-06-10</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/spring/">spring</a><span> / </span><a class="link-muted" href="/categories/spring/WebFlux/">WebFlux</a></span><span class="level-item">4분안에 읽기 (약 569 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/04/spring/WebFlux/spring-webflux-3/">Mono.defer(), Mono.fromCallable()</a></h1><div class="content"><p><code>Mono.defer()</code>와 <code>Mono.fromCallable()</code> 모두 지연 평가(lazy evaluation)를 제공하는데 사용된다. 지연 평가란 호출 시점을 지연시켜서 필요한 시점에서 코드를 실행하는 방식을 의미한다.</p>
<p><code>Mono.defer()</code> 메서드는 <code>Mono</code>의 factory 메서드 중 하나로, 인자로 전달받은 <code>Supplier</code> 함수를 사용하여 <code>Mono</code> 객체를 생성한다. 이때 <code>Supplier</code> 함수가 호출되는 시점은 <code>Mono</code> 객체를 subscribe 할 때이다.</p>
<p><code>Mono.fromCallable()</code> 메서드는 <code>Mono</code>의 factory 메서드 중 하나로, 인자로 전달받은 <code>Callable</code> 함수를 사용하여 <code>Mono</code> 객체를 생성한다. 이때 <code>Callable</code> 함수가 호출되는 시점은 <code>Mono</code> 객체 생성 시점이다.</p>
<p>따라서 <code>Mono.defer()</code>는 <code>Mono</code> 객체를 생성할 때마다 <code>Supplier</code> 함수를 실행하여 객체를 생성하는 방식을 사용하며, <code>Mono.fromCallable()</code>은 <code>Mono</code> 객체를 생성하는 시점에서 <code>Callable</code> 함수를 실행하여 객체를 생성하는 방식을 사용한다. <code>Mono.fromCallable()</code>은 즉시 실행되므로, <code>Mono.defer()</code>보다 더 많은 자원을 소비할 수 있다.</p>
<p><code>Mono.defer()</code>는 <code>Mono</code>의 객체 생성 시점을 늦추고, 객체 생성과 동시에 상태를 초기화할 수 있는 장점이 있고 반면에 <code>Mono.fromCallable()</code>은 <code>Callable</code> 함수의 실행 결과를 즉시 <code>Mono</code> 객체에 포함시키므로, 결과를 즉시 필요로 하는 경우에 유용하다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">&#123;</span><br><span class="line">    callExternalService()</span><br><span class="line">            .repeat(<span class="number">3</span>)</span><br><span class="line">						.doOnNext(System.out::println)</span><br><span class="line">            .subscribe();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Mono&lt;?&gt; callExternalService()</span><br><span class="line">&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;External service is called.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Mono.just(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">External service is called.</span></span><br><span class="line"><span class="comment">result</span></span><br><span class="line"><span class="comment">result</span></span><br><span class="line"><span class="comment">result</span></span><br><span class="line"><span class="comment">result</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>Mono.just(“result”)의 결과를 repeat(3)으로 세 번 반복하게 되면, 해당 Mono를 세 번 실행하게 된다.</p>
<p>하지만, Mono.just(“result”)는 호출될 때마다 값을 생성하는 게 아니라, 최초 1회 호출시 생성한 값을 계속해서 방출하게 된다. 그래서 &quot;External service is called.&quot;는 처음 1회만 출력되고, 세 번 반복되는 Mono.just(“result”)는 이미 생성된 값을 방출하게 되므로, 추가로 호출할 필요가 없어지게 된다.</p>
<p>따라서 &quot;External service is called.&quot;는 최초 1회만 출력되고, 세 번 반복되는 Mono.just(“result”)는 이미 생성된 값을 방출하게 된다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-02-14T06:27:21.000Z" title="2023. 2. 14. 오후 3:27:21">2023-02-14</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2023-05-29T08:32:43.839Z" title="2023. 5. 29. 오후 5:32:43">2023-05-29</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/spring/">spring</a><span> / </span><a class="link-muted" href="/categories/spring/WebFlux/">WebFlux</a></span><span class="level-item">9분안에 읽기 (약 1284 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/02/14/spring/WebFlux/spring-webflux-2/">Flux와 Stream의 reduce, 그리고 chatGPT</a></h1><div class="content"><p>평소처럼 개발하던 중 reduce를 사용한 코드에서 오류가 발생했다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java: cannot find symbol</span><br><span class="line">  symbol: variable accumulatedMap</span><br><span class="line"></span><br><span class="line">java: cannot find symbol</span><br><span class="line">  symbol: variable currentMap</span><br></pre></td></tr></table></figure>
<p>오류가 발생한 상황을 샘플코드로 대략적으로 재현해봤다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sample 1</span></span><br><span class="line">List&lt;Integer&gt; list = IntStream.range(<span class="number">0</span>,<span class="number">10</span>).boxed().collect(Collectors.toList());</span><br><span class="line"><span class="type">var</span> <span class="variable">collectMap</span> <span class="operator">=</span> list.stream()</span><br><span class="line">        .map(i -&gt; &#123;</span><br><span class="line">            Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            map.put(<span class="string">&quot;key&quot;</span> + i, i * <span class="number">10</span>);</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125;)</span><br><span class="line">				.reduce(**Collections.emptyMap()**, (accumulatedMap, currentMap) -&gt; <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;() &#123;</span><br><span class="line">            &#123;</span><br><span class="line">                putAll(accumulatedMap);</span><br><span class="line">                putAll(currentMap);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;Stream reduce Map size: &quot;</span> + collectMap.size());</span><br><span class="line"><span class="comment">// Stream reduce Map size: 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// sample 2</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">        .map(i -&gt; &#123;</span><br><span class="line">            Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            map.put(<span class="string">&quot;key&quot;</span> + i, i * <span class="number">10</span>);</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//.reduce(**Collections.emptyMap()** ,(accumulatedMap, currentMap) -&gt; new HashMap&lt;&gt;() &#123; // compile error!! &gt; `java: cannot find symbol`</span></span><br><span class="line">        .reduce((accumulatedMap, currentMap) -&gt; <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;() &#123;</span><br><span class="line">            &#123;</span><br><span class="line">                putAll(accumulatedMap);</span><br><span class="line">                putAll(currentMap);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .doOnNext(map -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Flux reduce Map size: &quot;</span> + map.size());</span><br><span class="line">        &#125;)</span><br><span class="line">        .subscribe();</span><br><span class="line"><span class="comment">// Flux reduce Map size: 10</span></span><br></pre></td></tr></table></figure>
<p>Stream과 Flux의 reduce를 호출 시 initial 파라미터로 각각 <code>Collections.emptyMap()</code>를 사용하였으나 Stream은 정상동작하지만 Flux에선 컴파일 오류가 발생하였다.</p>
<p>여러 케이스로 바꿔가면서 테스트를 해보니 Collections.emptyMap()의 반환값이 불변객체라서 안되는거 같다는 추론까진 도달했지만 확신은 없었다.</p>
<p>구글링으로 찾아보려고 했지만 공식문서를 봐도 Flux에선 안되고 Stream에선 되는 이유에 대해서 명확한 답변을 찾기 어려워서 고민하던차에 요즘 핫한 chatGPT에 물어볼까 하는 생각이 들어서 바로 실행해봤다.</p>
<p>아래는 chatGPT 와 대화한 내용</p>
<hr>
<blockquote>
<p>i want <code>public final &lt;A&gt; Mono&lt;A&gt; reduce(A initial, BiFunction&lt;A,? super T,A&gt; accumulator)</code> example code.</p>
</blockquote>
<ul>
<li>
<p>Here’s an example of how you could use the <strong><code>reduce</code></strong> method in Spring WebFlux:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.BiFunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReduceExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Flux&lt;Integer&gt; numbers = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        BiFunction&lt;Integer, Integer, Integer&gt; accumulator = (a, b) -&gt; a + b;</span><br><span class="line">        Mono&lt;Integer&gt; sum = numbers.reduce(<span class="number">0</span>, accumulator);</span><br><span class="line"></span><br><span class="line">        sum.subscribe(result -&gt; System.out.println(<span class="string">&quot;The sum of the numbers is: &quot;</span> + result));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This example creates a <strong><code>Flux</code></strong> of integers and then uses the <strong><code>reduce</code></strong> method to sum them up. The <strong><code>reduce</code></strong> method takes an initial value, in this case <strong><code>0</code></strong>, and a <strong><code>BiFunction</code></strong> that specifies how the current accumulation (<strong><code>a</code></strong>) is combined with each element from the flux (<strong><code>b</code></strong>) to produce the next accumulation.<br>
The <strong><code>subscribe</code></strong> method is then used to subscribe to the <strong><code>Mono</code></strong> returned by <strong><code>reduce</code></strong> and print out the result.</p>
</li>
</ul>
<blockquote>
<p>initial Type is HashMap</p>
</blockquote>
<ul>
<li>
<p>Here’s an example of how you could use the <strong><code>reduce</code></strong> method with an initial value of a <strong><code>HashMap</code></strong>:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.function.BiFunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReduceExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Flux&lt;String&gt; words = Flux.just(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>);</span><br><span class="line"></span><br><span class="line">        BiFunction&lt;HashMap&lt;String, Integer&gt;, String, HashMap&lt;String, Integer&gt;&gt; accumulator = (map, word) -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (!map.containsKey(word)) &#123;</span><br><span class="line">                map.put(word, <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put(word, map.get(word) + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125;;</span><br><span class="line">        Mono&lt;HashMap&lt;String, Integer&gt;&gt; wordCounts = words.reduce(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(), accumulator);</span><br><span class="line"></span><br><span class="line">        wordCounts.subscribe(result -&gt; System.out.println(<span class="string">&quot;The word counts are: &quot;</span> + result));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This example creates a <strong><code>Flux</code></strong> of strings and uses the <strong><code>reduce</code></strong> method to count the occurrences of each word. The <strong><code>reduce</code></strong> method takes an initial value, in this case a new empty <strong><code>HashMap</code></strong>, and a <strong><code>BiFunction</code></strong> that specifies how the current <strong><code>HashMap</code></strong> (<strong><code>map</code></strong>) is combined with each word from the flux (<strong><code>word</code></strong>) to produce the next <strong><code>HashMap</code></strong>.<br>
The <strong><code>subscribe</code></strong> method is then used to subscribe to the <strong><code>Mono</code></strong> returned by <strong><code>reduce</code></strong> and print out the result.</p>
</li>
</ul>
<blockquote>
<p>Why does <code>Mono&lt;HashMap&lt;String, Integer&gt;&gt; wordCounts = words.reduce(Collections.emptyMap(), accumulator);</code> error occur?</p>
</blockquote>
<ul>
<li>
<p>The error occurs because <strong><code>Collections.emptyMap()</code></strong> returns an unmodifiable map, which means you can’t modify it. The <strong><code>reduce</code></strong> method expects the accumulator function to modify the accumulator object, which is not possible with an unmodifiable map.<br>
You can resolve the issue by creating a new empty <strong><code>HashMap</code></strong> as the initial value instead of using <strong><code>Collections.emptyMap()</code></strong>, like this:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mono&lt;HashMap&lt;String, Integer&gt;&gt; wordCounts = words.reduce(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(), accumulator);</span><br></pre></td></tr></table></figure>
<p>This will give you a modifiable map that can be updated by the accumulator function as required by the <strong><code>reduce</code></strong> method.</p>
</li>
</ul>
<blockquote>
<p>But why does Java Stream API succeed?</p>
</blockquote>
<ul>
<li>The Java Stream API allows you to use the <strong><code>reduce</code></strong> method with an initial value of <strong><code>Collections.emptyMap()</code></strong> because the <strong><code>reduce</code></strong> operation in the Stream API operates on an internal data structure that is separate from the original data source. This allows the Stream API to handle unmodifiable maps as the initial value without any issues.<br>
However, in reactive programming with Spring WebFlux, the <strong><code>reduce</code></strong> method operates on the data stream directly, so you need to provide an accumulator object that is mutable. That’s why you need to use a new empty <strong><code>HashMap</code></strong> instead of <strong><code>Collections.emptyMap()</code></strong> as the initial value.</li>
</ul>
<hr>
<p>별로 기대하지 않았는데 원하는 내용에 대해서 생각보다 정확한 답변을 들을 수 있었다.</p>
<ol>
<li>먼저 Flux의 reduce 호출 시<code>initial</code>가 HashMap인 케이스로 샘플코드를 요청하고 Collections.emptyMap() 을 초기값으로 사용 시 왜 오류가 나는지 물어봤고<br>
Collections.emptyMap()으로 생성되는 객체는 returns an unmodifiable map 즉, immutable(불변)객체인데 reduce 메서드는 초기값으로 들어온 accumulator 객체를 수정할 것으로 예상했지만 수정이 불가능한 불변객체가 들어와서 오류가 발생하는거라고 한다.</li>
<li>Stream의 reduce에선 왜 성공하는지? 에 대해선<br>
Stream의 reduce는 원래 데이터와는 다른 별도의 내부 데이터 구조에서 동작하기 때문에 Collections.emptyMap()의 초기값으로 reduce를 사용할 수 있지만<br>
리액티브 프로그래밍 기반의 WebFlux에선 데이터 스트림에서 reduce 메서드가 직접 동작하기 때문에 변경가능한 accumulator 객체를  제공해야 하므로 변경이 가능한 빈 HashMap 객체를 생성해야 한다고 답변하였다.</li>
</ol>
<p>앞으로 나의 코딩선생님이 하나 더 늘었다는 생각에 흥분되면서도 한편으론 chatGPT를 사용해서 구글의 코딩인터뷰 Level3도 통과했다는 뉴스처럼 문맥을 파악해서 의도한 바를 정확하게 알려주는 답변을 보고 소름이 돋았다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-01-19T14:21:55.000Z" title="2023. 1. 19. 오후 11:21:55">2023-01-19</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2023-05-29T08:27:45.574Z" title="2023. 5. 29. 오후 5:27:45">2023-05-29</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/spring/">spring</a><span> / </span><a class="link-muted" href="/categories/spring/WebFlux/">WebFlux</a></span><span class="level-item">3분안에 읽기 (약 440 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/19/spring/WebFlux/spring-webflux-1/">publishOn과 subscribeOn</a></h1><div class="content"><p>회사에서 WebFlux로 개발하면서 publishOn과 subscribeOn의 사용법이 매번 헷갈려서 최대한 간단하게 정리를 해봤다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Flux.range(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">    .subscribeOn(Schedulers.newBoundedElastic(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&quot;sub2&quot;</span>))</span><br><span class="line">    .doOnNext(i -&gt; log.info(<span class="string">&quot;main 1: &#123;&#125;, number: &#123;&#125;&quot;</span>, Thread.currentThread().getName(), i))</span><br><span class="line">    .publishOn(Schedulers.newBoundedElastic(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&quot;pub1&quot;</span>))</span><br><span class="line">    .doOnNext(i -&gt; log.info(<span class="string">&quot;main 2: &#123;&#125;, number: &#123;&#125;&quot;</span>, Thread.currentThread().getName(), i))</span><br><span class="line">    .subscribeOn(Schedulers.newBoundedElastic(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&quot;sub1&quot;</span>))</span><br><span class="line">    .subscribe();</span><br><span class="line"></span><br><span class="line"><span class="comment">// log</span></span><br><span class="line">main <span class="number">1</span>: sub2-<span class="number">3</span>, number: <span class="number">1</span></span><br><span class="line">main <span class="number">1</span>: sub2-<span class="number">3</span>, number: <span class="number">2</span></span><br><span class="line">main <span class="number">1</span>: sub2-<span class="number">3</span>, number: <span class="number">3</span></span><br><span class="line">main <span class="number">2</span>: pub1-<span class="number">2</span>, number: <span class="number">1</span></span><br><span class="line">main <span class="number">2</span>: pub1-<span class="number">2</span>, number: <span class="number">2</span></span><br><span class="line">main <span class="number">2</span>: pub1-<span class="number">2</span>, number: <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h3 id="subscribeOn">subscribeOn</h3>
<p>subscribeOn은 호출된 곳의 앞쪽 publisher 체인과 뒷쪽의 subscriber 체인을 한꺼번에 별도의 스레드로 분리한다.<br>
느린 publisher 와 빠른 subscriber 의 조합에서 쓰기 적합하다고 하는데… 무슨 말인지 잘 모르겠다. 외부서비스에서 데이터를 읽어올때 쓰기 좋다고 한다.</p>
<p>위 예시처럼 subscribeOn을 동일한 체인에서 중첩해서 사용할 경우<br>
첫번째 subscribeOn 앞뒤 체인을 묶어서 sub2 스케줄러에서 담당하고<br>
두번째 subscribeOn 앞뒤 체인을 묶어서 sub1 스케줄러가 담당해야 하지만 이미 sub2에서 담당해서 그대로 sub2로 돌게 된다.</p>
<h3 id="publishOn">publishOn</h3>
<p>publishOn은 호출된 곳의 앞쪽 publisher 체인은 그대로 두고 뒷쪽 subscriber 체인만 별도의 스레드로 분리한다.<br>
빠른 publisher와 느린 subscriber 일때 쓰기 좋다고 하고 외부서비스로 데이터를 쓰는 작업할 때 좋닫고 한다.<br>
위 예시에서 subscribeOn으로 sub2 스레드에서 돌다가 publishOn을 만나면서 pub1 스케줄러에 작업을 할당하고 나머지 연산을 진행한다.</p>
<p>🔗 출처<br>
<a target="_blank" rel="external nofollow noopener noreferrer" href="https://wiki.terzeron.com/Programming/Java/Reactor_Flux%EC%9D%98_publishOn_subscribeOn%EC%9D%84_%EC%9D%B4%EC%9A%A9%ED%95%9C_%EC%8A%A4%EC%BC%80%EC%A5%B4%EB%A7%81">Reactor Flux의 publishOn subscribeOn을 이용한 스케쥴링</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-11-02T15:38:04.000Z" title="2020. 11. 3. 오전 12:38:04">2020-11-03</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2023-05-29T08:32:13.692Z" title="2023. 5. 29. 오후 5:32:13">2023-05-29</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/spring/">spring</a></span><span class="level-item">10분안에 읽기 (약 1561 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/03/spring/spring-1/">Spring Framework란 무엇인가</a></h1><div class="content"><p>기초가 부족한 관계로 기초부터 다시 정리도 하는 겸사겸사 첫주제는 spring framework로 정했다.</p>
<h1>Srping Framework란</h1>
<blockquote>
<p>스프링 프레임워크(Spring Framework)는 자바 플랫폼을 위한 오픈 소스 애플리케이션 프레임워크로 간단히 스프링(Spring)이라고도 한다. 동적인 웹 사이트를 개발하기 위한 여러 가지 서비스를 제공하고 있다.</p>
<p>대한민국 공공기관의 웹 서비스 개발 시 사용을 권장하고 있는 전자정부 표준프레임우커의 기반 기술로서 쓰이고 있다.</p>
</blockquote>
<h1>특징</h1>
<ol>
<li>
<h4 id="크기와-부하의-측면에서-경량-컨테이너로서-자바-객체를-직접관리한다">크기와 부하의 측면에서 경량 컨테이너로서 자바 객체를 직접관리한다.</h4>
<ul>
<li>객체 생성, 소멸과 같은 라이프 사이클을 관리하며 스프링으로부터 필요한 객체를 얻어올 수 있다</li>
</ul>
</li>
<li>
<h4 id="제어-반전-혹은-제어-역행-IoC-Inversion-of-Control-을-지원한다"><strong>제어 반전</strong> 혹은 <strong>제어 역행</strong>(<code>IoC: Inversion of Control</code>)을 지원한다.</h4>
<ul>
<li>컨트롤의 제어권이 사용자가 아닌 프레임워크에 있어서 필요에 따라 스프링에서 사용자의 코드를 호출한다.</li>
<li>IoC는 DI와 DL에 의해 구현된다.
<ul>
<li><strong>DL(Dependency Lookup)</strong> : 의존성 검색
<ul>
<li>컨테이너에서는 객체들을 관리하기 위해 별도의 저장소에 빈을 저장하는데 저장소에 저장되어 있는 개발자들이 컨테이너에서 제공하는 API를 이용하여 사용하고자 하는 빈을 검색하는 방법</li>
</ul>
</li>
<li><strong>DI(Dependency Injection)</strong> : 의존성 주입
<ul>
<li>의존성 주입이란 객체가 서로 의존하는 관계가 되게 의존성을 주입하는 것으로 객체지향 프로그램에서 의존성이란 하나의 객체가 어떠한 다른 객체를 사용하는 것을 의미한다.</li>
<li>IoC에선 각 클래스 사이에 필요로 하는 의존관계를 빈 설정 정보를 바탕으로 컨테이너가 자동으로 연결해 주는 것을 말한다.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<h4 id="POJO-Plain-Old-Java-Object-방식의-프레임워크이다"><strong>POJO</strong>(<code>Plain Old Java Object</code>) 방식의 프레임워크이다.</h4>
<ul>
<li>
<p>직역하면 <code>오래된 방식의 간단한 자바 오프젝트</code>라는 말이다.</p>
</li>
<li>
<p>일반적인 J2EE 프레임워크에 비해 구현을 위하여 특정한 인터페이스를 구현하거나 상속을 받을 필요가 없어 기존에 존재하는 라이브러리 등을 지원하기에 용이하고 객체가 가볍다.</p>
</li>
<li>
<p>쉽게 이야기하면 getter/setter 메소드로 이루어진 <code>Java Benas</code>를 생각하면 된다.</p>
</li>
<li>
<p>예를 들어 자바 서블릿 코드를 작성할 때는 보통 <code>HttpServlet</code>을 상속받아야 한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TestServlet <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이처럼 서블릿 프로그래밍을 하는 것만으로 객체지향 프로그래밍의 가장 핵심적인 기능 중 하나인 상속을 할 수 없고 HttpServlet에서 제공하는 기능을 어떻게 재사용할 것인지 판단해야하는 부분도 생겼다.</p>
</li>
<li>
<p>POJO는 이러한 제약이 없는 일반적인 객체를 말하는데 여기서 상속이나 인터페이스 구현을 사용하지 않는 객체가 아니라 어떠한 라이브러리나 프레임워크 등 자바 언어 사양 외에 어떠한 제한을 강제받지 않는 자바 오브젝트를 뜻하는 것이다.</p>
</li>
</ul>
</li>
<li>
<h4 id="관점-지향-프로그래밍-AOP-Aspect-Oriented-Programming-을-지원한다">관점 지향 프로그래밍(<code>AOP: Aspect Oriented Programming</code>)을 지원한다.</h4>
<ul>
<li>기존의 객체지향 프로그래밍(<code>OOP: Object Oriented Programming</code>) 에서는 객체의 재사용으로 인해 반복되는 코드의 양을 줄일 수 있었지만 여전히 많은 부분에서 중복된 코드가 발생한다.</li>
<li>예를 들어 로그, 권한 체크, 인증, 예외 처리와 같은 소스상에서 반복될 수 밖에 없는 필수적인 요소들로 코드의 가독성이나 유지보수적인 측면에서 좋지 않았다.</li>
<li>AOP는 OOP를 대체하는 개념이 아닌 <code>OOP를 좀 더 OOP처럼 사용하기 위하여 보완하는 개념</code>으로 공통적으로 반드시 필요하지만 중복해서 작성해야하는 핵심 이외의 코드들을 외부로 분리하여 관리한다.</li>
<li>이렇게 외부에서 관리하는 공통기능을 핵심 로직에 영향을 끼치지 않게 잘 끼워넣어 개발하면 무분별하게 중복되는 코드를 제거하면서 공통기능의 수정을 통해 모든 핵심 로직의 공통기능을 수정하여 효율적인 유지보수가 가능해지면서 재활용성이 극대화된다.</li>
<li>즉, 위에서 예를 들었던 트랜잭션이나 로깅, 보안과 같이 여러 모듈에서 공통적으로 사용하는 기능의 경우 분리하여 관리할 수 있다는 것이다.</li>
</ul>
</li>
<li>
<h4 id="MVC-Model2">MVC (Model2)</h4>
<ul>
<li>MVC는 <code>Model, View, Controller</code> 를 뜻하며 사용자 인터페이스와 비즈니스 로직을 분리하여 개발하는 것으로 웹 프로그래밍 개발에선 거의 표준처럼 사용되고 있으며 일반적으로 Model2를 지칭한다.
<ul>
<li><code>Model</code>은 데이터를 처리하는 영역</li>
<li><code>View</code>는 렌더링되서 실제로 보이는 화면</li>
<li><code>Controller</code>는 사용자의 요청을 받고, 응답을 주는 로직을 담당</li>
</ul>
</li>
<li>이처럼 소스를 분리하여 각 소스의 목적을 명확히하면 모듈화를 통해 재사용성을 늘리고 유지보수를 쉽게 할 수 있으며 확정성도 좋은 장점이 있다.</li>
<li>간단한 흐름을 살펴보면 <code>요청 -&gt; 컨트롤러 -&gt; 모델 -&gt; 컨트롤러 -&gt; 뷰</code> 의 흐름이라고 생각하면 된다.<br>
(MVC와 관련된 자세한 내용은 추후 기회가 된다면 별도로 포스트하겠다.)</li>
</ul>
</li>
</ol>
<p>이상으로 스프링 프레임워크의 특징에 대하여 대략적으로 정리를 해보았다.</p>
<hr>
<p><strong>Reference</strong></p>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://ko.wikipedia.org/">위키백과</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://m.blog.naver.com/weekamp/186678831">POJO(Plain Old Java Object) 란?</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://velog.io/@emawlrdl/Spring-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC-60k5hr47w2">Spring 개념 정리</a></li>
</ul>
<hr>
</div></article></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="Jaeyong Yoo"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Jaeyong Yoo</p><p class="is-size-6 is-block">Backend Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Seoul, Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">41</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">20</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/yoo0926" target="_blank" rel="external nofollow noopener noreferrer">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/yoo0926"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Mail" href="mailto:wodydasktp@gmail.com"><i class="far fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/rss2.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/algorithm/"><span class="level-start"><span class="level-item">algorithm</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/algorithm/programmers/"><span class="level-start"><span class="level-item">programmers</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/blog/"><span class="level-start"><span class="level-item">blog</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/book/"><span class="level-start"><span class="level-item">book</span></span><span class="level-end"><span class="level-item tag">21</span></span></a><ul><li><a class="level is-mobile" href="/categories/book/clean-architecture/"><span class="level-start"><span class="level-item">clean-architecture</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/book/spring5-reactive/"><span class="level-start"><span class="level-item">spring5-reactive</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/book/springboot-aws-webservice/"><span class="level-start"><span class="level-item">springboot-aws-webservice</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/docker/"><span class="level-start"><span class="level-item">docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/etc/"><span class="level-start"><span class="level-item">etc</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/functional/"><span class="level-start"><span class="level-item">functional</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/interview/"><span class="level-start"><span class="level-item">interview</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/spring/"><span class="level-start"><span class="level-item">spring</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/spring/WebFlux/"><span class="level-start"><span class="level-item">WebFlux</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/sql/"><span class="level-start"><span class="level-item">sql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/sql/postgresql/"><span class="level-start"><span class="level-item">postgresql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/web/"><span class="level-start"><span class="level-item">web</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2023-05-21T05:13:38.000Z">2023-05-21</time></p><p class="title"><a href="/2023/05/21/blog/hexo-upgrade/">Hexo 버전 업그레이드, 경고 지우기</a></p><p class="categories"><a href="/categories/blog/">blog</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-04-17T09:34:51.000Z">2023-04-17</time></p><p class="title"><a href="/2023/04/17/spring/log4j-1/">log4j2 설정</a></p><p class="categories"><a href="/categories/spring/">spring</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-04-04T00:46:08.000Z">2023-04-04</time></p><p class="title"><a href="/2023/04/04/spring/WebFlux/spring-webflux-3/">Mono.defer(), Mono.fromCallable()</a></p><p class="categories"><a href="/categories/spring/">spring</a> / <a href="/categories/spring/WebFlux/">WebFlux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-04-02T14:13:58.000Z">2023-04-02</time></p><p class="title"><a href="/2023/04/02/book/clean-architecture/clean-11/">11. 의식적으로 지름길 사용하기</a></p><p class="categories"><a href="/categories/book/">book</a> / <a href="/categories/book/clean-architecture/">clean-architecture</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-04-02T12:45:03.000Z">2023-04-02</time></p><p class="title"><a href="/2023/04/02/book/clean-architecture/clean-10/">10. 아키텍처 경계 강제하기</a></p><p class="categories"><a href="/categories/book/">book</a> / <a href="/categories/book/clean-architecture/">clean-architecture</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">5월 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">4월 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">3월 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">2월 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">1월 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">1월 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">12월 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">11월 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">9월 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">8월 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">6월 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">5월 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">4월 2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">12월 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">11월 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/JWT/"><span class="tag">JWT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/blog/"><span class="tag">blog</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/book/"><span class="tag">book</span><span class="tag">21</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/functional/"><span class="tag">functional</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/googleTagManager/"><span class="tag">googleTagManager</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/interview/"><span class="tag">interview</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kakao/"><span class="tag">kakao</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kakaotalk/"><span class="tag">kakaotalk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/open-graph/"><span class="tag">open graph</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/postgresql/"><span class="tag">postgresql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/programmers/"><span class="tag">programmers</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring/"><span class="tag">spring</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9B%94%EA%B0%84%EC%BD%94%EB%93%9C%EC%B1%8C%EB%A6%B0%EC%A7%80/"><span class="tag">월간코드챌린지</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">업데이트 소식 받기</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo-header.png" alt="하루하루 끄적끄적" height="28"></a><p class="is-size-7"><span>&copy; 2023 Jaeyong Yoo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a><br><span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv">0</span>명의 사용자가 방문 함</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/yoo0926/yoo0926.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>